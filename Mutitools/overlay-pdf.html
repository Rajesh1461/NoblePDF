<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Overlay PDFs - Noble PDF</title>
<link rel="icon" href="/assets/images/favicon.svg">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<style>
body{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif}
.cardx{background:rgba(255,255,255,.95);border-radius:20px;box-shadow:0 20px 40px rgba(0,0,0,.1);backdrop-filter:blur(10px);margin:20px auto;max-width:1200px}
.navbar{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-radius:20px 20px 0 0}
.nav-link{color:rgba(255,255,255,.9)!important}
.section{background:linear-gradient(135deg,#f8f9ff 0%,#e8ecff 100%);border-radius:15px;padding:20px;margin:20px}
.option{background:#fff;border:1px solid #e9ecef;border-radius:10px;padding:15px;margin:10px 0}
.preview{background:#f8f9fa;border:2px solid #e9ecef;border-radius:10px;height:220px;position:relative}
.overlay-box{position:absolute;border:2px dashed #667eea;background:rgba(102,126,234,.1);border-radius:6px;top:40px;left:40px;width:200px;height:120px}
.progress-section{background:linear-gradient(135deg,#e8f5e8 0%,#d4edda 100%);border-radius:15px;padding:20px;margin:20px;display:none}
.success-section{background:linear-gradient(135deg,#d4edda 0%,#c3e6cb 100%);border-radius:15px;padding:20px;margin:20px;display:none}
.btn-primary{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border:none;border-radius:25px;padding:12px 30px;font-weight:600}
.progress{height:25px;border-radius:15px;background:#e9ecef}.progress-bar{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-radius:15px}
</style>
</head>
<body>
<nav class="navbar navbar-expand-lg"><div class="container-fluid"><div class="navbar-nav ms-auto"><a class="nav-link" href="../index.html">Home</a></div></div></nav>
<div class="container">
<div class="cardx">
    <div class="text-center p-4">
        <h1 class="display-6 fw-bold text-primary mb-2"><i class="fas fa-layer-group me-2"></i>Overlay PDFs</h1>
        <p class="lead text-muted">Overlay one PDF on top of another with control over position and opacity</p>
    </div>

    <div class="section mx-3">
        <div class="row g-3">
            <div class="col-md-6">
                <div class="option">
                    <h6><i class="fas fa-file me-2"></i>Base PDF</h6>
                    <input type="file" id="baseInput" accept=".pdf" class="form-control">
                </div>
                <div class="option">
                    <h6><i class="fas fa-copy me-2"></i>Overlay PDF</h6>
                    <input type="file" id="overlayInput" accept=".pdf" class="form-control">
                </div>
                <div class="option">
                    <h6><i class="fas fa-sliders-h me-2"></i>Options</h6>
                    <div class="mb-2">
                        <label class="form-label">Opacity</label>
                        <input type="range" id="opacity" class="form-range" min="10" max="100" value="70">
                    </div>
                    <div class="mb-2">
                        <label class="form-label">Scale (%)</label>
                        <input type="number" id="scale" class="form-control" value="100" min="10" max="300">
                    </div>
                    <div class="row">
                        <div class="col-6"><label class="form-label">Offset X (px)</label><input type="number" id="offsetX" class="form-control" value="40"></div>
                        <div class="col-6"><label class="form-label">Offset Y (px)</label><input type="number" id="offsetY" class="form-control" value="40"></div>
                    </div>
                    <div class="form-check mt-2"><input class="form-check-input" type="checkbox" id="applyAll" checked><label class="form-check-label" for="applyAll">Apply to all pages</label></div>
                </div>
            </div>
            <div class="col-md-6">
                <h6 class="mb-2"><i class="fas fa-eye me-2"></i>Preview (simulated)</h6>
                <div class="preview" id="preview">
                    <div class="overlay-box" id="overlayBox"></div>
                </div>
                <small class="text-muted">Drag the box to adjust overlay position</small>
            </div>
        </div>
    </div>

    <div class="text-center p-3">
        <button class="btn btn-primary btn-lg" id="processBtn"><i class="fas fa-layer-group me-2"></i>Apply Overlay</button>
    </div>

    <div class="progress-section mx-3" id="progressSection">
        <h5><i class="fas fa-spinner fa-spin me-2"></i>Processing</h5>
        <div class="progress mb-3"><div class="progress-bar" id="progressBar" style="width:0%"></div></div>
        <p class="text-center" id="progressText">Initializing...</p>
    </div>

    <div class="success-section mx-3" id="successSection">
        <h5><i class="fas fa-check-circle me-2"></i>Overlay Applied</h5>
        <p>Your overlay has been applied successfully to the PDF.</p>
        <div class="row">
            <div class="col-md-6"><button class="btn btn-success w-100 mb-2" onclick="downloadPDF()"><i class="fas fa-download me-2"></i>Download Result</button></div>
            <div class="col-md-6"><button class="btn btn-outline-primary w-100 mb-2" onclick="location.reload()"><i class="fas fa-redo me-2"></i>Overlay Another</button></div>
        </div>
    </div>
</div>
</div>
<script>
const overlayBox=document.getElementById('overlayBox');
let dragging=false, startX=0,startY=0, startLeft=0,startTop=0;
overlayBox.addEventListener('mousedown',e=>{dragging=true;startX=e.clientX;startY=e.clientY;startLeft=overlayBox.offsetLeft;startTop=overlayBox.offsetTop;});
window.addEventListener('mousemove',e=>{if(!dragging) return; const dx=e.clientX-startX, dy=e.clientY-startY; overlayBox.style.left=(startLeft+dx)+'px'; overlayBox.style.top=(startTop+dy)+'px';});
window.addEventListener('mouseup',()=>dragging=false);

document.getElementById('opacity').addEventListener('input',e=>{overlayBox.style.background=`rgba(102,126,234,${e.target.value/100*0.5})`;});
document.getElementById('scale').addEventListener('input',e=>{overlayBox.style.transform=`scale(${e.target.value/100})`;});
document.getElementById('offsetX').addEventListener('input',e=>{overlayBox.style.left=e.target.value+'px';});
document.getElementById('offsetY').addEventListener('input',e=>{overlayBox.style.top=e.target.value+'px';});

document.getElementById('processBtn').addEventListener('click',()=>{
  document.getElementById('progressSection').style.display='block';
  const steps=[{t:'Merging pages...',p:25},{t:'Positioning overlay...',p:55},{t:'Applying opacity...',p:80},{t:'Finalizing...',p:100}];
  let i=0; const text=document.getElementById('progressText'); const bar=document.getElementById('progressBar');
  const tick=()=>{ if(i<steps.length){ text.textContent=steps[i].t; bar.style.width=steps[i].p+'%'; i++; setTimeout(tick,900);} else { setTimeout(()=>{ document.getElementById('progressSection').style.display='none'; document.getElementById('successSection').style.display='block'; }, 400);} };
  tick();
});

function downloadPDF(){ alert('Download would start here.'); }
</script>
    <script src="/assets/js/layout.js"></script>
</body>
</html>
