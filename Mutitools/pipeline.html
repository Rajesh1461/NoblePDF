<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pipeline - Noble PDF</title>
<link rel="icon" href="/assets/images/favicon.svg">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<style>
body{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif}
.shell{background:rgba(255,255,255,.95);border-radius:20px;box-shadow:0 20px 40px rgba(0,0,0,.1);backdrop-filter:blur(10px);margin:20px auto;max-width:1200px}
.navbar{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:20px 20px 0 0}
.nav-link{color:rgba(255,255,255,.9)!important}
.section{background:linear-gradient(135deg,#f8f9ff 0%,#e8ecff 100%);border-radius:15px;padding:20px;margin:20px}
.step{background:#fff;border:1px solid #e9ecef;border-radius:10px;padding:12px;margin:8px 0;display:flex;align-items:center;gap:10px}
.step .handle{cursor:grab;color:#6c757d}
.progress-section{background:linear-gradient(135deg,#e8f5e8 0%,#d4edda 100%);border-radius:15px;padding:20px;margin:20px;display:none}
.success-section{background:linear-gradient(135deg,#d4edda 0%,#c3e6cb 100%);border-radius:15px;padding:20px;margin:20px;display:none}
.btn-primary{background:linear-gradient(135deg,#667eea,#764ba2);border:none;border-radius:25px;padding:12px 30px;font-weight:600}
.progress{height:25px;border-radius:15px;background:#e9ecef}.progress-bar{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:15px}
</style>
</head>
<body>
<nav class="navbar navbar-expand-lg"><div class="container-fluid"><div class="navbar-nav ms-auto"><a class="nav-link" href="../index.html">Home</a></div></div></nav>
<div class="container">
<div class="shell">
    <div class="text-center p-4">
        <h1 class="display-6 fw-bold text-primary mb-2"><i class="fas fa-project-diagram me-2"></i>Pipeline</h1>
        <p class="lead text-muted">Create processing pipelines by chaining multiple operations</p>
    </div>

    <div class="section mx-3">
        <div class="row g-3">
            <div class="col-md-6">
                <h6><i class="fas fa-upload me-2"></i>Upload PDF</h6>
                <input type="file" class="form-control mb-3" id="fileInput" accept=".pdf">
                <h6><i class="fas fa-plus me-2"></i>Add Step</h6>
                <div class="input-group mb-2">
                    <select class="form-select" id="stepType">
                        <option value="compress">Compress</option>
                        <option value="ocr">OCR</option>
                        <option value="flatten">Flatten</option>
                        <option value="remove-metadata">Remove Metadata</option>
                        <option value="watermark">Add Watermark</option>
                    </select>
                    <button class="btn btn-primary" id="addStep"><i class="fas fa-plus me-1"></i>Add</button>
                </div>
                <small class="text-muted">Drag to reorder steps</small>
            </div>
            <div class="col-md-6">
                <h6><i class="fas fa-list me-2"></i>Pipeline Steps</h6>
                <div id="steps"></div>
            </div>
        </div>
    </div>

    <div class="text-center p-3"><button class="btn btn-primary btn-lg" id="runBtn"><i class="fas fa-play me-2"></i>Run Pipeline</button></div>

    <div class="progress-section mx-3" id="progressSection">
        <h5><i class="fas fa-spinner fa-spin me-2"></i>Running Pipeline</h5>
        <div class="progress mb-3"><div class="progress-bar" id="progressBar" style="width:0%"></div></div>
        <p class="text-center" id="progressText">Initializing...</p>
    </div>

    <div class="success-section mx-3" id="successSection">
        <h5><i class="fas fa-check-circle me-2"></i>Pipeline Complete</h5>
        <p>All steps executed successfully.</p>
        <div class="text-center"><button class="btn btn-success" onclick="alert('Download simulated')"><i class="fas fa-download me-2"></i>Download Output</button></div>
    </div>
</div>
</div>
<script>
const steps=document.getElementById('steps');
document.getElementById('addStep').addEventListener('click',()=>{
  const type=document.getElementById('stepType').value;
  const el=document.createElement('div'); el.className='step';
  el.innerHTML=`<span class="handle"><i class="fas fa-grip-vertical"></i></span><span class="badge bg-primary text-wrap text-start" style="min-width:140px">${type}</span><input class="form-control form-control-sm" placeholder="Options (e.g., level=medium)"/><button class="btn btn-sm btn-outline-danger">Remove</button>`;
  el.querySelector('button').addEventListener('click',()=>el.remove());
  steps.appendChild(el);
});

document.getElementById('runBtn').addEventListener('click',()=>{
  document.getElementById('progressSection').style.display='block';
  const total=Math.max(1,steps.children.length);
  let i=0; const text=document.getElementById('progressText'); const bar=document.getElementById('progressBar');
  const tick=()=>{ if(i<=total){ text.textContent=`Executing step ${i} of ${total}`; bar.style.width=(i/total*100)+'%'; i++; setTimeout(tick,800);} else { setTimeout(()=>{ document.getElementById('progressSection').style.display='none'; document.getElementById('successSection').style.display='block'; }, 300);} };
  tick();
});
</script>
    <script src="/assets/js/layout.js"></script>
</body>
</html>
